{% extends "base.html" %}

{% block title %}Reports - Smart Hostel System{% endblock %}

{% block content %}
<h2><i class="fas fa-chart-bar"></i> Reports & Statistics</h2>

<div class="export-buttons" style="margin-bottom: 20px;">
    <a href="{{ url_for('export_summary_csv') }}" class="btn btn-primary"><i class="fas fa-file-csv"></i> Export Summary CSV</a>
    <a href="{{ url_for('export_students_csv') }}" class="btn btn-secondary"><i class="fas fa-file-csv"></i> Export Students CSV</a>
    <a href="{{ url_for('export_fees_csv') }}" class="btn btn-secondary"><i class="fas fa-file-csv"></i> Export Fees CSV</a>
    <a href="{{ url_for('export_allocations_csv') }}" class="btn btn-secondary"><i class="fas fa-file-csv"></i> Export Allocations CSV</a>
    <a href="{{ url_for('export_rooms_csv') }}" class="btn btn-secondary"><i class="fas fa-file-csv"></i> Export Rooms CSV</a>
</div>

<h3>Room & Student Statistics</h3>
<div class="stats-grid">
    <div class="stat-card">
        <h3><i class="fas fa-users"></i> Total Students</h3>
        <p class="stat-number">{{ total_students }}</p>
    </div>
    <div class="stat-card">
        <h3><i class="fas fa-door-open"></i> Total Rooms</h3>
        <p class="stat-number">{{ total_rooms }}</p>
    </div>
    <div class="stat-card">
        <h3><i class="fas fa-bed"></i> Occupied Rooms</h3>
        <p class="stat-number">{{ occupied_rooms }}</p>
    </div>
    <div class="stat-card">
        <h3><i class="fas fa-check-circle"></i> Available Rooms</h3>
        <p class="stat-number">{{ available_rooms }}</p>
    </div>
    <div class="stat-card">
        <h3><i class="fas fa-key"></i> Active Allocations</h3>
        <p class="stat-number">{{ active_allocations }}</p>
    </div>
    <div class="stat-card">
        <h3><i class="fas fa-sign-out-alt"></i> Checked Out</h3>
        <p class="stat-number">{{ checked_out }}</p>
    </div>
</div>

<h3>Fee Statistics</h3>
<div class="stats-grid">
    <div class="stat-card">
        <h3><i class="fas fa-file-invoice-dollar"></i> Total Fees</h3>
        <p class="stat-number">{{ total_fees }}</p>
    </div>
    <div class="stat-card">
        <h3><i class="fas fa-check-circle"></i> Paid Fees</h3>
        <p class="stat-number">{{ paid_fees }}</p>
    </div>
    <div class="stat-card">
        <h3><i class="fas fa-clock"></i> Pending Fees</h3>
        <p class="stat-number">{{ pending_fees }}</p>
    </div>
    <div class="stat-card">
        <h3><i class="fas fa-exclamation-triangle"></i> Overdue Fees</h3>
        <p class="stat-number">{{ overdue_fees }}</p>
    </div>
    <div class="stat-card">
        <h3><i class="fas fa-money-bill-wave"></i> Total Collected</h3>
        <p class="stat-number" style="font-size: 1.5rem;">Rs{{ "%.2f"|format(total_collected) }}</p>
    </div>
    <div class="stat-card">
        <h3><i class="fas fa-hourglass-half"></i> Total Pending</h3>
        <p class="stat-number" style="font-size: 1.5rem;">Rs{{ "%.2f"|format(total_pending) }}</p>
    </div>
    <div class="stat-card">
        <h3><i class="fas fa-exclamation-circle"></i> Total Overdue</h3>
        <p class="stat-number" style="font-size: 1.5rem;">Rs{{ "%.2f"|format(total_overdue) }}</p>
    </div>
</div>
{% endblock %}

